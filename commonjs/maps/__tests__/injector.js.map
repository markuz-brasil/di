{"version":3,"sources":["__tests__/injector.js"],"names":[],"mappings":"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","file":"__tests__/injector.js","sourcesContent":["jest.autoMockOff()\nimport '6to5/polyfill'\n\nimport {\n  annotate,\n  Injector,\n  Inject,\n  InjectLazy,\n  Provide,\n  SuperConstructor,\n  TransientScope\n} from '../index'\n\nimport {Car, CyclicEngine} from '../__fixtures__/car'\nimport {house as houseModule} from '../__fixtures__/house'\nimport {house as shinyHouseModule} from '../__fixtures__/shiny_house'\n\ndescribe('injector', function() {\n\n  it('should instantiate a class without dependencies', function() {\n    class Car {\n      constructor() {}\n      start() {}\n    }\n\n    var injector = new Injector()\n    var car = injector.get(Car)\n\n    expect(car).toBeInstanceOf(Car)\n  })\n\n  it('should resolve dependencies based on @Inject annotation', function() {\n    class Engine {\n      start() {}\n    }\n\n    class Car {\n      constructor(engine) {\n        this.engine = engine\n      }\n\n      start() {}\n    }\n    annotate(Car, new Inject(Engine))\n\n    var injector = new Injector()\n    var car = injector.get(Car)\n\n    expect(car).toBeInstanceOf(Car)\n    expect(car.engine).toBeInstanceOf(Engine)\n  })\n\n  it('should override providers', function() {\n    class Engine {}\n\n    class Car {\n      constructor(engine) {\n        this.engine = engine\n      }\n\n      start() {}\n    }\n    annotate(Car, new Inject(Engine))\n\n    class MockEngine {\n      start() {}\n    }\n    annotate(MockEngine, new Provide(Engine))\n\n    var injector = new Injector([MockEngine])\n    var car = injector.get(Car)\n\n    expect(car).toBeInstanceOf(Car)\n    expect(car.engine).toBeInstanceOf(MockEngine)\n  })\n\n  it('should allow factory function', function() {\n    class Size {}\n\n    annotate(computeSize, new Provide(Size))\n    function computeSize() {\n      return 0\n    }\n\n    var injector = new Injector([computeSize])\n    var size = injector.get(Size)\n\n    expect(size).toBe(0)\n  })\n\n  it('should cache instances', function() {\n    class Car {}\n\n    var injector = new Injector()\n    var car = injector.get(Car)\n\n    expect(injector.get(Car)).toBe(car)\n  })\n\n  it('should throw when no provider defined', function() {\n    var injector = new Injector()\n\n    expect(() => injector.get('NonExisting'))\n        .toThrowError('No provider for NonExisting!')\n  })\n\n  it('should show the full path when no provider defined', function() {\n    var injector = new Injector(houseModule)\n\n    expect(() => injector.get('House'))\n        .toThrowError('No provider for Sink! (House -> Kitchen -> Sink)')\n  })\n\n  it('should throw when trying to instantiate a cyclic dependency', function() {\n    var injector = new Injector([CyclicEngine])\n\n    expect(() => injector.get(Car))\n        .toThrowError('Cannot instantiate cyclic dependency! (Car -> Engine -> Car)')\n  })\n\n  it('should show the full path when error happens in a constructor', function() {\n    class Engine {\n      constructor() {\n        throw new Error('This engine is broken!')\n      }\n    }\n\n    class Car {\n      constructor(e) {}\n    }\n    annotate(Car, new Inject(Engine))\n\n    var injector = new Injector()\n\n    expect(() => injector.get(Car))\n      .toThrowError(/Error during instantiation of Engine! \\(Car -> Engine\\)/)\n  })\n\n  describe('SuperConstructor', function () {\n\n    it('should support \"super\" to call a parent constructor', function() {\n      class Something {}\n\n      class Parent {\n        constructor(something) {\n          this.parentSomething = something\n        }\n      }\n      annotate(Parent, new Inject(Something))\n\n      class Child extends Parent {\n        constructor(superConstructor, something) {\n          superConstructor()\n          this.childSomething = something\n        }\n      }\n\n      annotate(Child, new Inject(SuperConstructor, Something))\n\n      var injector = new Injector()\n      var instance = injector.get(Child)\n\n      expect(instance.parentSomething).toBeInstanceOf(Something)\n      expect(instance.childSomething).toBeInstanceOf(Something)\n      expect(instance.childSomething).toBe(instance.parentSomething)\n    })\n\n    it('should support \"super\" to call multiple parent constructors', function() {\n      class Foo {}\n      class Bar {}\n\n      class Parent {\n        constructor(foo) {\n          this.parentFoo = foo\n        }\n      }\n      annotate(Parent, new Inject(Foo))\n\n      class Child extends Parent {\n        constructor(superConstructor, foo) {\n          superConstructor()\n          this.childFoo = foo\n        }\n      }\n      annotate(Child, new Inject(SuperConstructor, Foo))\n\n      class GrandChild extends Child {\n        constructor(superConstructor, foo, bar) {\n          superConstructor()\n          this.grandChildBar = bar\n          this.grandChildFoo = foo\n        }\n      }\n\n      annotate(GrandChild, new Inject(SuperConstructor, Foo, Bar))\n\n      var injector = new Injector()\n      var instance = injector.get(GrandChild)\n\n      expect(instance.parentFoo).toBeInstanceOf(Foo)\n      expect(instance.childFoo).toBeInstanceOf(Foo)\n      expect(instance.grandChildFoo).toBeInstanceOf(Foo)\n      expect(instance.grandChildBar).toBeInstanceOf(Bar)\n    })\n\n    it('should throw an error when used in a factory function', function() {\n      class Something {}\n\n      annotate(createSomething, new Provide(Something))\n      annotate(createSomething, new Inject(SuperConstructor))\n      function createSomething() {}\n\n      expect(function() {\n        var injector = new Injector([createSomething])\n        injector.get(Something)\n      }).toThrowError(/Only classes with a parent can ask for SuperConstructor!/)\n    })\n\n  })\n\n  // it('should throw an error when used in a class without any parent', function() {\n  //   class WithoutParent {}\n  //   annotate(WithoutParent, new Inject(SuperConstructor))\n\n  //   var injector = new Injector()\n\n  //   expect(function() {\n  //     injector.get(WithoutParent)\n  //   }).toThrowError(/Only classes with a parent can ask for SuperConstructor!/)\n  // })\n\n  it('should throw an error when null/undefined token requested', function() {\n    var injector = new Injector()\n\n    expect(function() {\n      injector.get(null)\n    }).toThrowError(/Invalid token \"null\" requested!/)\n\n    expect(function() {\n      injector.get(undefined)\n    }).toThrowError(/Invalid token \"undefined\" requested!/)\n  })\n\n  // regression\n  it('should show the full path when null/undefined token requested', function() {\n    class Foo {}\n    annotate(Foo, new Inject(undefined))\n\n    class Bar {}\n    annotate(Bar, new Inject(null))\n\n    var injector = new Injector()\n\n    expect(function() {\n      injector.get(Foo)\n    }).toThrowError(/Invalid token \"undefined\" requested! \\(Foo -> undefined\\)/)\n\n    expect(function() {\n      injector.get(Bar)\n    }).toThrowError(/Invalid token \"null\" requested! \\(Bar -> null\\)/)\n  })\n\n  it('should provide itself', function() {\n    var injector = new Injector()\n\n    expect(injector.get(Injector)).toBe(injector)\n  })\n\n  describe('transient', function() {\n\n    it('should never cache', function() {\n      class Foo {}\n      annotate(Foo, new TransientScope())\n\n      var injector = new Injector()\n      expect(injector.get(Foo)).not.toBe(injector.get(Foo))\n    })\n\n    it('should always use dependencies (default providers) from the youngest injector', function() {\n      class Foo {}\n      annotate(Foo, new Inject())\n\n      class AlwaysNewInstance {\n        constructor(foo) {\n          this.foo = foo\n        }\n      }\n      annotate(AlwaysNewInstance, new TransientScope())\n      annotate(AlwaysNewInstance, new Inject(Foo))\n\n      var injector = new Injector()\n      var child = injector.createChild([Foo]) // force new instance of Foo\n\n      var fooFromChild = child.get(Foo)\n      var fooFromParent = injector.get(Foo)\n\n      var alwaysNew1 = child.get(AlwaysNewInstance)\n      var alwaysNew2 = child.get(AlwaysNewInstance)\n      var alwaysNewFromParent = injector.get(AlwaysNewInstance)\n\n      expect(alwaysNew1.foo).toBe(fooFromChild)\n      expect(alwaysNew2.foo).toBe(fooFromChild)\n      expect(alwaysNewFromParent.foo).toBe(fooFromParent)\n    })\n\n    it('should always use dependencies from the youngest injector', function() {\n      class Foo {}\n      annotate(Foo, new Inject())\n\n      class AlwaysNewInstance {\n        constructor(foo) {\n          this.foo = foo\n        }\n      }\n      annotate(AlwaysNewInstance, new TransientScope())\n      annotate(AlwaysNewInstance, new Inject(Foo))\n\n      var injector = new Injector([AlwaysNewInstance])\n      var child = injector.createChild([Foo]) // force new instance of Foo\n\n      var fooFromChild = child.get(Foo)\n      var fooFromParent = injector.get(Foo)\n\n      var alwaysNew1 = child.get(AlwaysNewInstance)\n      var alwaysNew2 = child.get(AlwaysNewInstance)\n      var alwaysNewFromParent = injector.get(AlwaysNewInstance)\n\n      expect(alwaysNew1.foo).toBe(fooFromChild)\n      expect(alwaysNew2.foo).toBe(fooFromChild)\n      expect(alwaysNewFromParent.foo).toBe(fooFromParent)\n    })\n  })\n\n  describe('child', function() {\n\n    it('should load instances from parent injector', function() {\n      class Car {\n        start() {}\n      }\n\n      var parent = new Injector([Car])\n      var child = parent.createChild([])\n\n      var carFromParent = parent.get(Car)\n      var carFromChild = child.get(Car)\n\n      expect(carFromChild).toBe(carFromParent)\n    })\n\n    it('should create new instance in a child injector', function() {\n      class Car {\n        start() {}\n      }\n\n      class MockCar {\n        start() {}\n      }\n      annotate(MockCar, new Provide(Car))\n\n      var parent = new Injector([Car])\n      var child = parent.createChild([MockCar])\n\n      var carFromParent = parent.get(Car)\n      var carFromChild = child.get(Car)\n\n      expect(carFromParent).not.toBe(carFromChild)\n      expect(carFromChild).toBeInstanceOf(MockCar)\n    })\n\n    it('should force new instances by annotation', function() {\n      class RouteScope {}\n\n      class Engine {\n        start() {}\n      }\n\n      class Car {\n        constructor(engine) {\n          this.engine = engine\n        }\n\n        start() {}\n      }\n      annotate(Car, new RouteScope())\n      annotate(Car, new Inject(Engine))\n\n      var parent = new Injector([Car, Engine])\n      var child = parent.createChild([], [RouteScope])\n\n      var carFromParent = parent.get(Car)\n      var carFromChild = child.get(Car)\n\n      expect(carFromChild).not.toBe(carFromParent)\n      expect(carFromChild.engine).toBe(carFromParent.engine)\n    })\n\n    it('should force new instances by annotation using overridden provider', function() {\n      class RouteScope {}\n\n      class Engine {\n        start() {}\n      }\n\n      class MockEngine {\n        start() {}\n      }\n      annotate(MockEngine, new RouteScope())\n      annotate(MockEngine, new Provide(Engine))\n\n      var parent = new Injector([MockEngine])\n      var childA = parent.createChild([], [RouteScope])\n      var childB = parent.createChild([], [RouteScope])\n\n      var engineFromA = childA.get(Engine)\n      var engineFromB = childB.get(Engine)\n\n      expect(engineFromA).not.toBe(engineFromB)\n      expect(engineFromA).toBeInstanceOf(MockEngine)\n      expect(engineFromB).toBeInstanceOf(MockEngine)\n    })\n\n    it('should force new instance by annotation using the lowest overridden provider', function() {\n      class RouteScope {}\n\n      class Engine {\n        constructor() {}\n        start() {}\n      }\n      annotate(Engine, new RouteScope())\n\n      class MockEngine {\n        constructor() {}\n        start() {}\n      }\n      annotate(MockEngine, new Provide(Engine))\n      annotate(MockEngine, new RouteScope())\n\n      class DoubleMockEngine {\n        start() {}\n      }\n      annotate(DoubleMockEngine, new Provide(Engine))\n      annotate(DoubleMockEngine, new RouteScope())\n\n      var parent = new Injector([Engine])\n      var child = parent.createChild([MockEngine])\n      var grantChild = child.createChild([], [RouteScope])\n\n      var engineFromParent = parent.get(Engine)\n      var engineFromChild = child.get(Engine)\n      var engineFromGrantChild = grantChild.get(Engine)\n\n      expect(engineFromParent).toBeInstanceOf(Engine)\n      expect(engineFromChild).toBeInstanceOf(MockEngine)\n      expect(engineFromGrantChild).toBeInstanceOf(MockEngine)\n      expect(engineFromGrantChild).not.toBe(engineFromChild)\n    })\n\n    it('should show the full path when no provider', function() {\n      var parent = new Injector(houseModule)\n      var child = parent.createChild(shinyHouseModule)\n\n      expect(() => child.get('House'))\n          .toThrowError('No provider for Sink! (House -> Kitchen -> Sink)')\n    })\n\n    it('should provide itself', function() {\n      var parent = new Injector()\n      var child = parent.createChild([])\n\n      expect(child.get(Injector)).toBe(child)\n    })\n\n    it('should cache default provider in parent injector', function() {\n      class Foo {}\n      annotate(Foo, new Inject())\n\n      var parent = new Injector()\n      var child = parent.createChild([])\n\n      var fooFromChild = child.get(Foo)\n      var fooFromParent = parent.get(Foo)\n\n      expect(fooFromParent).toBe(fooFromChild)\n    })\n\n    it('should force new instance by annotation for default provider', function() {\n      class RequestScope {}\n\n      class Foo {}\n      annotate(Foo, new Inject())\n      annotate(Foo, new RequestScope())\n\n      var parent = new Injector()\n      var child = parent.createChild([], [RequestScope])\n\n      var fooFromChild = child.get(Foo)\n      var fooFromParent = parent.get(Foo)\n\n      expect(fooFromParent).not.toBe(fooFromChild)\n    })\n  })\n\n  describe('lazy', function() {\n\n    it('should instantiate lazily', function() {\n      var constructorSpy = jasmine.createSpy('constructor')\n\n      class ExpensiveEngine {\n        constructor() {\n          constructorSpy()\n        }\n      }\n\n      class Car {\n        constructor(createEngine) {\n          this.engine = null\n          this.createEngine = createEngine\n        }\n\n        start() {\n          this.engine = this.createEngine()\n        }\n      }\n      annotate(Car, new InjectLazy(ExpensiveEngine))\n\n      var injector = new Injector()\n      var car = injector.get(Car)\n\n      expect(constructorSpy).not.toHaveBeenCalled()\n\n      car.start()\n      expect(constructorSpy).toHaveBeenCalled()\n      expect(car.engine).toBeInstanceOf(ExpensiveEngine)\n    })\n\n    // regression\n    it('should instantiate lazily from a parent injector', function() {\n      var constructorSpy = jasmine.createSpy('constructor')\n\n      class ExpensiveEngine {\n        constructor() {\n          constructorSpy()\n        }\n      }\n\n      class Car {\n        constructor(createEngine) {\n          this.engine = null\n          this.createEngine = createEngine\n        }\n\n        start() {\n          this.engine = this.createEngine()\n        }\n      }\n      annotate(Car, new InjectLazy(ExpensiveEngine))\n\n      var injector = new Injector([ExpensiveEngine])\n      var childInjector = injector.createChild([Car])\n      var car = childInjector.get(Car)\n\n      expect(constructorSpy).not.toHaveBeenCalled()\n\n      car.start()\n      expect(constructorSpy).toHaveBeenCalled()\n      expect(car.engine).toBeInstanceOf(ExpensiveEngine)\n    })\n\n    describe('with locals', function() {\n\n      it('should always create a new instance', function() {\n        var constructorSpy = jasmine.createSpy('constructor')\n\n        class ExpensiveEngine {\n          constructor(power) {\n            constructorSpy()\n            this.power = power\n          }\n        }\n        annotate(ExpensiveEngine, new TransientScope())\n        annotate(ExpensiveEngine, new Inject('power'))\n\n        class Car {\n          constructor(createEngine) {\n            this.createEngine = createEngine\n          }\n        }\n        annotate(Car, new InjectLazy(ExpensiveEngine))\n\n        var injector = new Injector()\n        var car = injector.get(Car)\n\n        var veyronEngine = car.createEngine('power', 1184)\n        var mustangEngine = car.createEngine('power', 420)\n\n        expect(veyronEngine).not.toBe(mustangEngine)\n        expect(veyronEngine.power).toBe(1184)\n        expect(mustangEngine.power).toBe(420)\n\n        var mustangEngine2 = car.createEngine('power', 420)\n        expect(mustangEngine).not.toBe(mustangEngine2)\n      })\n    })\n  })\n})\n"],"sourceRoot":"/source/"}